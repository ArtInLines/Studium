sum calc specialmode internal_calc mainloop 